"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["boxalino-real-time-user-experience-integration"],{296:(t,e,i)=>{var s,r,n,o=i(6285),l=i(3206),a=i(1966),c=i(3435),u=i(3637);class h extends o.Z{init(){const t=l.Z.querySelector(document,this.options.parentFilterPanelSelector);this.listing=window.PluginManager.getPluginInstanceFromElement(t,"Listing"),this.listing._filterPanelActive=!1,this.listing.refreshRegistry(),this._initFilterPlugins(),this.activeFilterContainer=l.Z.querySelector(document,this.options.activeFilterContainerSelector),this._buildLabels(),this._prepareOffCanvas()}refreshRegistry(){this.init(),window.PluginManager.initializePlugins()}_initFilterPlugins(){for(const t of this.options.filterPlugins){let e=`[data-${this.options.pluginSelectorPrefix}-${c.Z.toDashCase(t)}]`;c.Z.toDashCase(t).startsWith(this.options.pluginSelectorPrefix)&&(e=`[data-${c.Z.toDashCase(t)}]`);const i=this.el.querySelectorAll(e),s=`${this.options.pluginSelectorPrefix}${t}Options`;for(const e of i){const i=e.dataset[s];window.PluginManager.initializePlugin(t,e,i?JSON.parse(i):{})}}}_buildLabels(){this.listing._registry.forEach((t=>{t.getValues()}));const t=l.Z.querySelectorAll(this.activeFilterContainer,`.${this.options.activeFilterLabelRemoveClass}`,!1);t.length&&(this.registerLabelEvents(t),this.createResetAllButton())}registerLabelEvents(t){a.Z.iterate(t,(t=>{t.addEventListener("click",(()=>this.resetFilter(t)))}))}resetFilter(t){this.listing._filterPanelActive=!1,this.listing.resetFilter(t),this.listing.refreshRegistry()}createResetAllButton(){l.Z.querySelector(this.activeFilterContainer,this.options.resetAllFilterButtonSelector).addEventListener("click",this.resetAll.bind(this))}resetAll(){this.listing._filterPanelActive=!1,this.listing.resetAllFilter(),this.listing.refreshRegistry(),this.init()}_prepareOffCanvas(){if(this.hasOffCanvas()){const t=document.querySelector('[data-rtux-offcanvas-filter-content="true"]'),e=l.Z.querySelector(t,".filter-panel",!1);e&&(u.Z.setContent(t.innerHTML),e.remove())}}hasOffCanvas(){return!!document.querySelector(this.options.offCanvasSelector)}getOffCanvas(){return document.querySelector(this.options.offCanvasSelector)}}s=h,n={parentFilterPanelSelector:".cms-element-product-listing-wrapper",activeFilterLabelRemoveClass:"filter-active-remove",activeFilterContainerSelector:".filter-panel-rtux-active-container",resetAllFilterButtonSelector:".filter-reset-all",filterPlugins:["FilterRange","RtuxFilterRatingSelect","RtuxFilterMultiSelect","FilterBoolean"],pluginSelectorPrefix:"rtux",offCanvasSelector:".rtux-offcanvas-filter"},(r=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,e||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(r="options"))in s?Object.defineProperty(s,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[r]=n;var d=i(1110),g=i(2721);class p{getHtml(t,e){this._value=e;var i=JSON.parse(t);this.groupBy=i.advanced[0]._bx_group_by,this.uuid=i.advanced[0]._bx_variant_uuid;var s="";return i.blocks.forEach(function(t){t.callback&&(s+=this.toHtml(t.callback[0],t))}.bind(this)),s}toHtml(t,e){try{return this[t](e)}catch(t){return"<div></div>"}}getWrapperHtml(t){var e='<div class="search-suggest js-search-result">';return e+='<ul class="search-suggest-container">',t.blocks.forEach(function(t){t.callback&&(e+=this.toHtml(t.callback[0],t))}.bind(this)),e+="</ul></div>"}getProductListHtml(t){var e='<div class="bx-narrative" data-bx-variant-uuid="'+this.uuid+'" data-bx-narrative-name="products-list" data-bx-narrative-group-by="'+this.groupBy+'">';return this._totalProductsFound=t["bx-hits"].totalHitCount,t.blocks.forEach(function(t){t.callback&&(e+=this.getProductItemHtml(t))}.bind(this)),e+="</div>"}getProductItemHtml(t){var e=t["bx-hit"].discountedPrice.toLocaleString("de_CH",{style:"currency",currency:window.rtuxAutocomplete.currency,maximumFractionDigits:2}),i='<li class="search-suggest-product js-result bx-narrative-item" data-bx-item-id="'+t["bx-hit"].id+'">';return i+='<a href="'+window.location.origin+"/"+t["bx-hit"].link[0]+'" title="'+t["bx-hit"].title+'" class="search-suggest-product-link">',i+='<div class="row align-items-center no-gutters">',i+='<div class="col-auto search-suggest-product-image-container"><img src="'+t["bx-hit"].image[0]+'" srcset="'+t["bx-hit"].image[0]+'" class="search-suggest-product-image" alt="'+t["bx-hit"].title+'"/></div>',i+='<div class="col search-suggest-product-name">'+t["bx-hit"].title+"</div>",i+='<div class="col-auto search-suggest-product-price"><br><small class="search-suggest-product-reference-price">'+e+"</small></div></div></a></li>"}getSuggestionListHtml(t){var e="";return t.blocks.forEach(function(t){t.callback&&(e+=this.getSuggestionItemHtml(t))}.bind(this)),e}getSuggestionItemHtml(t){var e="";if("accessor"===t.accessor){let i=t["bx-acQuery"].highlighted;null==i&&(i=t["bx-acQuery"].suggestion),e+='<li class="search-suggest-product js-result bx-narrative-item" data-bx-item-type="acTerm" data-bx-item-id="'+t["bx-acQuery"].suggestion+'">',e+=' <a href="'+window.rtuxAutocomplete.suggestLink+encodeURIComponent(t["bx-acQuery"].suggestion)+'"\n       title="'+t["bx-acQuery"].suggestion+'"\n       class="search-suggestion-link">\n        <p>'+i+"</p>\n    </a>",e+="</li>"}return e}getSeeAllHtml(){var t="";return this._totalProductsFound>0?(t+='<li class="js-result search-suggest-total"><div class="row align-items-center no-gutters"><div class="col">',t+='<a href="'+window.rtuxAutocomplete.suggestLink+this._value+'" title="'+window.rtuxAutocomplete.seeAllSearchResultsMessage+'" class="search-suggest-total-link">'+window.rtuxAutocomplete.seeAllSearchResultsMessage+'</a></div><div class="col-auto search-suggest-total-count">'+this._totalProductsFound+window.rtuxAutocomplete.seeAllSearchResultLabel+"</div></div></li>"):t+='<li class="search-suggest-no-result">'+window.rtuxAutocomplete.noSearchResultsMessage+"</li>",t}}class f extends g.Z{init(){super.init(),this._renderHelper=new p}_suggest(t){if(void 0===window.rtuxAutocomplete)return super._suggest(t);this.isTest=window.rtuxAutocomplete.test,this.rtuxApiHelper=window.PluginManager.getPluginInstances("RtuxApiHelper")[0];const e=new d.Z(this._submitButton);e.create(),this.$emitter.publish("beforeSearch"),this._client.abort();var i=JSON.stringify(this._getApiRequestData(t)),s=this.rtuxApiHelper.getApiRequestUrl(window.rtuxAutocomplete.url);this.isTest&&(console.log(s),console.log(i)),i&&this._client.post(s,i,(i=>{this._clearSuggestResults(),e.remove();try{if(!i)throw new Error("RtuxApiAutocomplete error: the request failed");var s=this._renderHelper.getHtml(i,t);this.isTest&&console.log(s),this.el.insertAdjacentHTML("beforeend",s),this._handleAfterSuggest(),this.$emitter.publish("afterSuggest")}catch(e){this.isTest&&console.log(e),super._suggest(t)}}),"application/json",!1)}_getApiRequestData(t){return this.rtuxApiHelper.getApiRequestData(window.rtuxAutocomplete.apiPreferentialAccount,window.rtuxAutocomplete.apiPreferentialKey,"autocomplete",window.rtuxAutocomplete.language,"products_group_id",5,window.rtuxAutocomplete.dev,window.rtuxAutocomplete.test,null,this._getParametersForAcRequest(t))}_getParametersForAcRequest(t){return{acQueriesHitCount:12,acHighlight:!0,acHighlightPre:"<em>",acHighlightPost:"</em>",query:t,filters:this._getFiltersForAcRequest()}}_getFiltersForAcRequest(){return window.masterNavigationId?[{field:"visibility",from:20,to:1e3,fromInclusive:!0,toInclusive:!0},{field:"status",values:[1],negative:!1},{field:"category_id",values:[window.masterNavigationId],negative:!1}]:[{field:"visibility",from:20,to:1e3,fromInclusive:!0,toInclusive:!0},{field:"status",values:[1],negative:!1}]}_handleAfterSuggest(){const t=this._getSearchTerms(),e=this._getSearchResult();if(!e)return;const i=this._getResultItems(e);0!==i.length&&i.forEach((e=>{this._highlightSearchTerm(e,t)}))}_highlightSearchTerm(t,e){e.forEach((e=>{const i=this._getRegex(e);t.innerHTML=t.innerHTML.replace(i,"<b>$1</b>")}))}_getRegex(t){return new RegExp(`(${t})`,"gi")}_getSearchTerms(){return this._getSearchInput().value.split(" ").filter((t=>""!==t))}_getSearchInput(){return this.el.querySelector("input[type=search]")}_getSearchResult(){return this.el.querySelector(".js-search-result")}_getResultItems(t){return t.querySelectorAll(".js-search-result .search-suggest-product-name")}}var v=i(158),b=i(1857),m=i.n(b);class S extends v.Z{}!function(t,e,i){(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,e||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(S,"options",m()(v.Z.options,{}));var y=i(5410);class _ extends y.Z{getValues(){const t=l.Z.querySelectorAll(this.el,`${this.options.checkboxSelector}:checked`,!1);let e=[];t?a.Z.iterate(t,(t=>{e.push(t.value)})):e=[],this.selection=e,this._updateCount();const i={};return i[this.options.name]=e,i}setValuesFromUrl(t){let e=!1;return Object.keys(t).forEach((i=>{if(i===this.options.name){e=!0;t[i].split("|").forEach((t=>{const e=l.Z.querySelector(this.el,`[value="${t}"]`,!1);e&&(e.checked=!0,this.selection.push(e.value))}))}})),super._updateCount(),e}getLabels(){const t=l.Z.querySelectorAll(this.el,`${this.options.checkboxSelector}:checked`,!1);let e=[];return t?a.Z.iterate(t,(t=>{e.push({label:t.dataset.label,value:t.dataset.value,id:t.id})})):e=[],e}}!function(t,e,i){(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,e||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(_,"options",m()(y.Z.options,{}));var w=i(8254),x=i(4690),C=(i(9068),i(1661));class A extends C.Z{init(){const t=document.querySelector(this.options.crossellingTabsListId);if(t instanceof Element==!1)throw Error("PDP cross-selling tabs element does not exist in your template!");t.children.length>0||(this.options=m()(this.options,JSON.parse(l.Z.getAttribute(this.el,"data-rtux-crossselling-options"))),this.client=new w.Z,this._getCrossselling())}_getCrossselling(){try{event.preventDefault(),x.Z.create(this.el);const t=this._getRequestData();this.$emitter.publish("beforeGetRtuxApiCrossselling"),this.client.abort(),this.client.post(this.options.url,JSON.stringify(t),(t=>this._showCrossselling(t)))}catch(t){console.log(t)}}_showCrossselling(t){try{for(;this.el.firstChild;)this.el.removeChild(this.el.firstChild);this.el.insertAdjacentHTML("beforeend",t),this._initPlugins()}catch(t){console.log(t)}x.Z.remove(this.el)}_initPlugins(){const t=this.el.parentNode;for(const e of this.options.adjacentPlugins){const i=t.querySelectorAll(`[data-${c.Z.toDashCase(e)}]`);let s=`${e}Options`;s=s.charAt(0).toLowerCase()+s.substring(1);for(const t of i){const i=t.dataset[s];window.PluginManager.initializePlugin(e,t,i?JSON.parse(i):{})}}super.init()}_getRequestData(){const t={id:this.options.main};return window.csrf.enabled&&"twig"===window.csrf.mode&&(t._csrf_token=this.options.csrfToken),t}}!function(t,e,i){(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,e||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(A,"options",m()(C.Z.options,{crossellingTabsListId:"#product-detail-cross-selling-tabs",adjacentPlugins:["ProductSlider"],main:0,url:"",csrfToken:""}));class P extends o.Z{init(){this.el.addEventListener("click",this._onClickOffRtuxCanvasFilter.bind(this))}_onCloseRtuxOffCanvas(t){const e=t.detail.offCanvasContent[0];document.querySelector('[data-rtux-offcanvas-filter-content="true"]').innerHTML=e.innerHTML,document.$emitter.unsubscribe("onCloseOffcanvas",this._onCloseRtuxOffCanvas.bind(this)),window.PluginManager.getPluginInstances("RtuxListingFilterPlugin")[0].refreshRegistry()}_onClickOffRtuxCanvasFilter(t){t.preventDefault();const e=document.querySelector('[data-rtux-offcanvas-filter-content="true"]');if(!e)throw Error('There was no DOM element with the data attribute "data-rtux-offcanvas-filter-content".');u.Z.open(e.innerHTML,(()=>{}),"bottom",!0,u.Z.REMOVE_OFF_CANVAS_DELAY(),!0,["offcanvas-filter","rtux-offcanvas-filter"]);l.Z.querySelector(e,".filter-panel").remove(),window.PluginManager.getPluginInstances("RtuxListingFilterPlugin")[0].refreshRegistry(),document.$emitter.subscribe("onCloseOffcanvas",this._onCloseRtuxOffCanvas.bind(this)),this.$emitter.publish("onClickOffCanvasFilter")}}const Z=window.PluginManager;Z.register("RtuxListingFilterPlugin",h,"[data-rtux-listing-filter]"),Z.register("RtuxOffCanvasFilter",P,"[data-rtux-offcanvas-filter]"),Z.extend("SearchWidget","SearchWidget",f,"[data-search-form]"),Z.register("RtuxFilterRatingSelect",S,"[data-rtux-filter-rating-select]"),Z.register("RtuxFilterMultiSelect",_,"[data-rtux-filter-multi-select]"),Z.register("RtuxCrossSellingPlugin",A,"[data-rtux-crossselling]")},1661:(t,e,i)=>{i.d(e,{Z:()=>c});var s,r,n,o=i(6285),l=i(3206),a=i(7474);class c extends o.Z{init(){this._registerEvents()}_registerEvents(){l.Z.querySelectorAll(this.el,this.options.tabSelector).forEach((t=>{t.addEventListener("shown.bs.tab",this._rebuildCrossSellingSlider.bind(this))}))}_rebuildCrossSellingSlider(t){if(!t.target.hasAttribute("id"))return;const e=t.target.id,i=l.Z.querySelector(document,`#${e}-pane`),s=l.Z.querySelector(i,this.options.productSliderSelector,!1);if(!1===s)return;window.PluginManager.getPluginInstanceFromElement(s,"ProductSlider").rebuild(a.Z.getCurrentViewport(),!0)}}s=c,n={tabSelector:'a[data-bs-toggle="tab"]',productSliderSelector:'[data-product-slider="true"]'},(r=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,e||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(r="options"))in s?Object.defineProperty(s,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[r]=n},2721:(t,e,i)=>{i.d(e,{Z:()=>p});var s,r,n,o=i(6285),l=i(3206),a=i(46),c=i(8254),u=i(1110),h=i(9658),d=i(4340),g=i(1966);class p extends o.Z{init(){try{this._inputField=l.Z.querySelector(this.el,this.options.searchWidgetInputFieldSelector),this._submitButton=l.Z.querySelector(this.el,this.options.searchWidgetButtonFieldSelector),this._url=l.Z.getAttribute(this.el,this.options.searchWidgetUrlDataAttribute)}catch(t){return}this._client=new c.Z,this._navigationHelper=new d.Z(this._inputField,this.options.searchWidgetResultSelector,this.options.searchWidgetResultItemSelector,!0),this._registerEvents()}_registerEvents(){this._inputField.addEventListener("input",a.Z.debounce(this._handleInputEvent.bind(this),this.options.searchWidgetDelay),{capture:!0,passive:!0}),this.el.addEventListener("submit",this._handleSearchEvent.bind(this));const t=h.Z.isTouchDevice()?"touchstart":"click";document.body.addEventListener(t,this._onBodyClick.bind(this)),this._registerInputFocus()}_handleSearchEvent(t){this._inputField.value.trim().length<this.options.searchWidgetMinChars&&(t.preventDefault(),t.stopPropagation())}_handleInputEvent(){const t=this._inputField.value.trim();t.length<this.options.searchWidgetMinChars?this._clearSuggestResults():(this._suggest(t),this.$emitter.publish("handleInputEvent",{value:t}))}_suggest(t){const e=this._url+encodeURIComponent(t);this._client.abort();const i=new u.Z(this._submitButton);i.create(),this.$emitter.publish("beforeSearch"),this._client.get(e,(t=>{this._clearSuggestResults(),i.remove(),this.el.insertAdjacentHTML("beforeend",t),this.$emitter.publish("afterSuggest")}))}_clearSuggestResults(){this._navigationHelper.resetIterator();const t=document.querySelectorAll(this.options.searchWidgetResultSelector);g.Z.iterate(t,(t=>t.remove())),this.$emitter.publish("clearSuggestResults")}_onBodyClick(t){t.target.closest(this.options.searchWidgetSelector)||t.target.closest(this.options.searchWidgetResultSelector)||(this._clearSuggestResults(),this.$emitter.publish("onBodyClick"))}_registerInputFocus(){if(this._toggleButton=l.Z.querySelector(document,this.options.searchWidgetCollapseButtonSelector,!1),!this._toggleButton)return void console.warn(`Called selector '${this.options.searchWidgetCollapseButtonSelector}' for the search toggle button not found. Autofocus has been disabled on mobile.`);const t=h.Z.isTouchDevice()?"touchstart":"click";this._toggleButton.addEventListener(t,(()=>{setTimeout((()=>this._focusInput()),0)}))}_focusInput(){this._toggleButton&&!this._toggleButton.classList.contains(this.options.searchWidgetCollapseClass)&&(this._toggleButton.blur(),this._inputField.setAttribute("tabindex","-1"),this._inputField.focus()),this.$emitter.publish("focusInput")}}s=p,n={searchWidgetSelector:".js-search-form",searchWidgetResultSelector:".js-search-result",searchWidgetResultItemSelector:".js-result",searchWidgetInputFieldSelector:"input[type=search]",searchWidgetButtonFieldSelector:"button[type=submit]",searchWidgetUrlDataAttribute:"data-url",searchWidgetCollapseButtonSelector:".js-search-toggle-btn",searchWidgetCollapseClass:"collapsed",searchWidgetDelay:250,searchWidgetMinChars:3},(r=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,e||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(r="options"))in s?Object.defineProperty(s,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[r]=n},6536:(t,e,i)=>{i.d(e,{Z:()=>a});var s,r,n,o=i(6285),l=i(3206);class a extends o.Z{_init(){super._init(),this._validateMethods();const t=l.Z.querySelector(document,this.options.parentFilterPanelSelector);this.listing=window.PluginManager.getPluginInstanceFromElement(t,"Listing"),this.listing.registerFilter(this),this._preventDropdownClose()}_preventDropdownClose(){const t=l.Z.querySelector(this.el,this.options.dropdownSelector,!1);t&&t.addEventListener("click",(t=>{t.stopPropagation()}))}_validateMethods(){if("function"!=typeof this.getValues)throw new Error(`[${this._pluginName}] Needs the method "getValues"'`);if("function"!=typeof this.getLabels)throw new Error(`[${this._pluginName}] Needs the method "getLabels"'`);if("function"!=typeof this.reset)throw new Error(`[${this._pluginName}] Needs the method "reset"'`);if("function"!=typeof this.resetAll)throw new Error(`[${this._pluginName}] Needs the method "resetAll"'`)}}s=a,n={parentFilterPanelSelector:".cms-element-product-listing-wrapper",dropdownSelector:".filter-panel-item-dropdown"},(r=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,e||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(r="options"))in s?Object.defineProperty(s,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[r]=n},5410:(t,e,i)=>{i.d(e,{Z:()=>h});var s,r,n,o=i(3206),l=i(1966),a=i(6536),c=i(1857),u=i.n(c);class h extends a.Z{init(){this.selection=[],this.counter=o.Z.querySelector(this.el,this.options.countSelector),this._registerEvents()}_registerEvents(){const t=o.Z.querySelectorAll(this.el,this.options.checkboxSelector);l.Z.iterate(t,(t=>{t.addEventListener("change",this._onChangeFilter.bind(this))}))}getValues(){const t=o.Z.querySelectorAll(this.el,`${this.options.checkboxSelector}:checked`,!1);let e=[];t?l.Z.iterate(t,(t=>{e.push(t.id)})):e=[],this.selection=e,this._updateCount();const i={};return i[this.options.name]=e,i}getLabels(){const t=o.Z.querySelectorAll(this.el,`${this.options.checkboxSelector}:checked`,!1);let e=[];return t?l.Z.iterate(t,(t=>{e.push({label:t.dataset.label,id:t.id})})):e=[],e}setValuesFromUrl(t={}){let e=!1;const i=t[this.options.name],s=i?i.split("|"):[],r=this.selection.filter((t=>!s.includes(t))),n=s.filter((t=>!this.selection.includes(t)));return(r.length>0||n.length>0)&&(e=!0),n.forEach((t=>{const e=o.Z.querySelector(this.el,`[id="${t}"]`,!1);e&&(e.checked=!0,this.selection.push(e.id))})),r.forEach((t=>{this.reset(t),this.selection=this.selection.filter((e=>e!==t))})),this._updateCount(),e}_onChangeFilter(){this.listing.changeListing(!0,{p:1})}reset(t){const e=o.Z.querySelector(this.el,`[id="${t}"]`,!1);e&&(e.checked=!1)}resetAll(){this.selection.filter=[];const t=o.Z.querySelectorAll(this.el,`${this.options.checkboxSelector}:checked`,!1);t&&l.Z.iterate(t,(t=>{t.checked=!1}))}refreshDisabledState(t){const e=t[this.options.name];!e.entities||e.entities.length<1?this.disableFilter():(this.enableFilter(),this._disableInactiveFilterOptions(e.entities.map((t=>t.id))))}_disableInactiveFilterOptions(t){const e=o.Z.querySelectorAll(this.el,this.options.checkboxSelector);l.Z.iterate(e,(e=>{!0!==e.checked&&(t.includes(e.id)?this.enableOption(e):this.disableOption(e))}))}disableOption(t){const e=t.closest(this.options.listItemSelector);e.classList.add("disabled"),e.setAttribute("title",this.options.snippets.disabledFilterText),t.disabled=!0}enableOption(t){const e=t.closest(this.options.listItemSelector);e.removeAttribute("title"),e.classList.remove("disabled"),t.disabled=!1}enableAllOptions(){const t=o.Z.querySelectorAll(this.el,this.options.checkboxSelector);l.Z.iterate(t,(t=>{this.enableOption(t)}))}disableFilter(){const t=o.Z.querySelector(this.el,this.options.mainFilterButtonSelector);t.classList.add("disabled"),t.setAttribute("disabled","disabled"),t.setAttribute("title",this.options.snippets.disabledFilterText)}enableFilter(){const t=o.Z.querySelector(this.el,this.options.mainFilterButtonSelector);t.classList.remove("disabled"),t.removeAttribute("disabled"),t.removeAttribute("title")}_updateCount(){this.counter.innerText=this.selection.length?`(${this.selection.length})`:""}}s=h,r="options",n=u()(a.Z.options,{checkboxSelector:".filter-multi-select-checkbox",countSelector:".filter-multi-select-count",listItemSelector:".filter-multi-select-list-item",snippets:{disabledFilterText:"Filter not active"},mainFilterButtonSelector:".filter-panel-item-toggle"}),(r=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,e||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(r))in s?Object.defineProperty(s,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[r]=n},158:(t,e,i)=>{i.d(e,{Z:()=>h});var s,r,n,o=i(5410),l=i(1966),a=i(3206),c=i(1857),u=i.n(c);class h extends o.Z{getValues(){const t={},e=a.Z.querySelector(this.el,`${this.options.checkboxSelector}:checked`,!1);return this.currentRating=e.value,this._updateCount(),t[this.options.name]=this.currentRating?this.currentRating.toString():"",t}setValuesFromUrl(t){let e=!1;return Object.keys(t).forEach((i=>{if(i===this.options.name){this.currentRating=t[i],this._updateCount();const s=a.Z.querySelectorAll(this.el,this.options.checkboxSelector,!1);s&&l.Z.iterate(s,(t=>{t.value===this.currentRating&&(t.checked=!0)})),e=!0}})),e}getLabels(){const t=a.Z.querySelector(this.el,this.options.checkboxSelector+":checked",!1).value;let e=[];if(t){let i=this.options.snippets.filterRatingActiveLabelEnd;1===parseInt(t)&&(i=this.options.snippets.filterRatingActiveLabelEndSingular),e.push({label:`${this.options.snippets.filterRatingActiveLabelStart}\n                        ${t}/${this.options.maxPoints}\n                        ${i}`,id:"rating"})}else e=[];return e}refreshDisabledState(t){const e=t[this.options.name].max;if(e&&e>0)return this.enableFilter(),void this._disableInactiveFilterOptions(e);this.disableFilter()}_disableInactiveFilterOptions(t){const e=a.Z.querySelectorAll(this.el,this.options.checkboxSelector);l.Z.iterate(e,(e=>{!0!==e.checked&&(t>=e.value?this.enableOption(e):this.disableOption(e))}))}reset(){this.resetAll()}_updateCount(){this.counter.innerText=this.currentRating?`(${this.currentRating}/${this.options.maxPoints})`:""}}s=h,r="options",n=u()(o.Z.options,{maxPoints:5,snippets:{filterRatingActiveLabelStart:"Minimum",filterRatingActiveLabelEndSingular:"star",filterRatingActiveLabelEnd:"stars",disabledFilterText:"Filter not active"}}),(r=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,e||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(r))in s?Object.defineProperty(s,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[r]=n},3637:(t,e,i)=>{i.d(e,{Z:()=>u,r:()=>c});var s=i(9658),r=i(2005),n=i(1966);const o="offcanvas",l=350;class a{constructor(){this.$emitter=new r.Z}open(t,e,i,s,r,n,o){this._removeExistingOffCanvas();const l=this._createOffCanvas(i,n,o,s);this.setContent(t,s,r),this._openOffcanvas(l,e)}setContent(t,e,i){const s=this.getOffCanvas();s[0]&&(s[0].innerHTML=t,this._registerEvents(i))}setAdditionalClassName(t){this.getOffCanvas()[0].classList.add(t)}getOffCanvas(){return document.querySelectorAll(`.${o}`)}close(t){const e=this.getOffCanvas();n.Z.iterate(e,(t=>{bootstrap.Offcanvas.getInstance(t).hide()})),setTimeout((()=>{this.$emitter.publish("onCloseOffcanvas",{offCanvasContent:e})}),t)}goBackInHistory(){window.history.back()}exists(){return this.getOffCanvas().length>0}_openOffcanvas(t,e){a.bsOffcanvas.show(),window.history.pushState("offcanvas-open",""),"function"==typeof e&&e()}_registerEvents(t){const e=s.Z.isTouchDevice()?"touchend":"click",i=this.getOffCanvas();n.Z.iterate(i,(e=>{const s=()=>{setTimeout((()=>{e.remove(),this.$emitter.publish("onCloseOffcanvas",{offCanvasContent:i})}),t),e.removeEventListener("hide.bs.offcanvas",s)};e.addEventListener("hide.bs.offcanvas",s)})),window.addEventListener("popstate",this.close.bind(this,t),{once:!0});const r=document.querySelectorAll(".js-offcanvas-close");n.Z.iterate(r,(i=>i.addEventListener(e,this.close.bind(this,t))))}_removeExistingOffCanvas(){a.bsOffcanvas=null;const t=this.getOffCanvas();return n.Z.iterate(t,(t=>t.remove()))}_getPositionClass(t){return"left"===t?"offcanvas-start":"right"===t?"offcanvas-end":`offcanvas-${t}`}_createOffCanvas(t,e,i,s){const r=document.createElement("div");if(r.classList.add(o),r.classList.add(this._getPositionClass(t)),!0===e&&r.classList.add("is-fullwidth"),i){const t=typeof i;if("string"===t)r.classList.add(i);else{if(!Array.isArray(i))throw new Error(`The type "${t}" is not supported. Please pass an array or a string.`);i.forEach((t=>{r.classList.add(t)}))}}return document.body.appendChild(r),a.bsOffcanvas=new bootstrap.Offcanvas(r,{backdrop:!1!==s||"static"}),r}}const c=Object.freeze(new a);class u{static open(t,e=null,i="left",s=!0,r=350,n=!1,o=""){c.open(t,e,i,s,r,n,o)}static setContent(t,e=!0,i=350){c.setContent(t,e,i)}static setAdditionalClassName(t){c.setAdditionalClassName(t)}static close(t=350){c.close(t)}static exists(){return c.exists()}static getOffCanvas(){return c.getOffCanvas()}static REMOVE_OFF_CANVAS_DELAY(){return l}}}},t=>{t.O(0,["vendor-node","vendor-shared"],(()=>{return e=296,t(t.s=e);var e}));t.O()}]);